import type { Meta, StoryObj } from '@storybook/nextjs-vite'\nimport { StepsSidebar, type Step } from '@/components/form/StepsSidebar'\nimport { useState } from 'react'\n\nconst meta: Meta<typeof StepsSidebar> = { \n    title: 'Form/StepsSidebar', \n    component: StepsSidebar, \n    parameters: { \n        layout: 'fullscreen', \n }, \n    tags: ['autodocs'], \n }\n\nexport default meta\ntype Story = StoryObj<typeof meta>\n\n// Sample steps for demonstration\nconst sampleSteps: Step[] = [\n    { id: 1, name: 'Property Details', description: 'Basic information and location', fields: ['title', 'type', 'description'] },\n    { id: 2, name: 'Gallery', description: 'Upload display image (required)', fields: ['media', 'images'] },\n    { id: 3, name: 'Amenities', description: 'Select at least one amenity', fields: ['amenities'] },\n    { id: 4, name: 'Plans', description: 'Choose your listing plan', fields: ['plans'] },\n    { id: 5, name: 'Review', description: 'Review and submit', fields: [] }\n]\n\n// Interactive story wrapper\nfunction StepsSidebarDemo({\n    initialStep = 1,\n    initialValidation = {},\n    errors = {}\n}: {\n    initialStep?: number\n    initialValidation?: Record<number, boolean>\n    errors?: Record<string, any>\n}) {\n    const [currentStep, setCurrentStep] = useState(initialStep)\n    const [stepValidation, setStepValidation] = useState<Record<number, boolean>>(initialValidation)\n\n    const canNavigateToStep = (step: number) => {\n        if (step === 1) return true\n        if (step === 2) return stepValidation[1]\n        if (step === 3) return stepValidation[1] && stepValidation[2]\n        if (step === 4) return stepValidation[1] && stepValidation[2] && stepValidation[3]\n        if (step === 5) return stepValidation[1] && stepValidation[2] && stepValidation[3] && stepValidation[4]\n        return false\n    }\n\n    const handleStepClick = (stepId: number) => {\n        if (canNavigateToStep(stepId)) {\n            setCurrentStep(stepId)\n            // Simulate validation for demo\n            if (stepId > currentStep) {\n                const newValidation = { ...stepValidation }\n                for (let i = 1; i < stepId; i++) {\n                    newValidation[i] = true\n                }\n                setStepValidation(newValidation)\n            }\n        }\n    }\n\n    return (\n        <div className=\"flex h-screen\">\n            <StepsSidebar\n                steps={sampleSteps}\n                currentStep={currentStep}\n                stepValidation={stepValidation}\n                errors={errors}\n                onStepClick={handleStepClick}\n                canNavigateToStep={canNavigateToStep}\n            />\n            <div className=\"flex-1 p-8 bg-gray-50\">\n                <div className=\"max-w-2xl mx-auto\">\n                    <h2 className=\"text-2xl font-bold mb-4\">{sampleSteps[currentStep - 1]?.name}</h2>\n                    <p className=\"text-gray-600 mb-6\">{sampleSteps[currentStep - 1]?.description}</p>\n                    \n                    <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n                        <p className=\"text-sm text-gray-500 mb-4\">Current Step: {currentStep}</p>\n                        \n                        <div className=\"space-y-2\">\n                            <h4 className=\"font-medium\">Step Validation Status:</h4>\n                            {sampleSteps.map(step => (\n                                <div key={step.id} className=\"flex items-center gap-2 text-sm\">\n                                    <span className={`w-3 h-3 rounded-full ${\n                                        stepValidation[step.id] \n                                            ? 'bg-green-500' \n                                            : step.id === currentStep \n                                                ? 'bg-blue-500' \n                                                : 'bg-gray-300'\n                                    }`}></span>\n                                    <span>Step {step.id}: {step.name}</span>\n                                    {stepValidation[step.id] && <span className=\"text-green-600\">âœ“</span>}\n                                </div>\n                            ))}\n                        </div>\n                        \n                        <button \n                            onClick={() => handleStepClick(currentStep + 1)}\n                            className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n                            disabled={currentStep >= sampleSteps.length}\n                        >\n                            Next Step\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport const Default: Story = {\n    render: () => <StepsSidebarDemo />,\n    parameters: {\n        docs: {\n            description: {\n                story: 'Interactive steps sidebar navigation. Click on steps to navigate (only accessible steps are clickable).'\n            }\n        }\n    }\n}\n\nexport const WithProgress: Story = {\n    render: () => (\n        <StepsSidebarDemo \n            initialStep={3}\n            initialValidation={{ 1: true, 2: true }}\n        />\n    ),\n    parameters: {\n        docs: {\n            description: {\n                story: 'Steps sidebar showing progress with completed steps and current step.'\n            }\n        }\n    }\n}\n\nexport const WithErrors: Story = {\n    render: () => (\n        <StepsSidebarDemo \n            initialStep={2}\n            initialValidation={{ 1: true }}\n            errors={{ 'media': 'Display image is required' }}\n        />\n    ),\n    parameters: {\n        docs: {\n            description: {\n                story: 'Steps sidebar showing error state when current step has validation errors.'\n            }\n        }\n    }\n}\n\nexport const AllCompleted: Story = {\n    render: () => (\n        <StepsSidebarDemo \n            initialStep={5}\n            initialValidation={{ 1: true, 2: true, 3: true, 4: true }}\n        />\n    ),\n    parameters: {\n        docs: {\n            description: {\n                story: 'Steps sidebar with all steps completed, showing the final review step.'\n            }\n        }\n    }\n}